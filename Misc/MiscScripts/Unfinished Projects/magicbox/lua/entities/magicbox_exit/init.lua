/*-------------------------------------------------------------------------------------------------------------------------
	Serverside magic box exit code
-------------------------------------------------------------------------------------------------------------------------*/

AddCSLuaFile( "cl_init.lua" )
AddCSLuaFile( "shared.lua" )

include( "shared.lua" )

/*-------------------------------------------------------------------------------------------------------------------------
	Initialization
-------------------------------------------------------------------------------------------------------------------------*/

function ENT:Initialize()
	self:SetModel( "models/props_junk/wood_crate002a.mdl" )
	
	self:PhysicsInitBox( Vector( -20.3231, -34.4971, -20.2868 ) * 1.1, Vector( 20.3128, 34.2730, 20.1908 ) * 1.1 )
	self:SetCollisionBounds( Vector( -20.3231, -20.2868, -34.4971 ) * 1.1, Vector( 20.3128, 20.1908, 34.2730 ) * 1.1 )
	
	self:GetPhysicsObject():EnableMotion( false )
end

/*-------------------------------------------------------------------------------------------------------------------------
	Teleporting
-------------------------------------------------------------------------------------------------------------------------*/

function ENT:Touch( ent )
	local y = ( ent:GetPos() - self:GetPos() ):Angle().y
	
	if ( ent:IsPlayer() and y >= 85 and y <= 100 ) then
		ent:SetPos( self:GetOwner():GetPos() + Vector( 0, -50, -40 ) )
	end
end